<h2 class="list__title">US National Film Registry</h2>

<input
    id="search"
    class="search"
    type="text"
    [value]="search"
    (input)="handleSearchChange($event)"
    placeholder="Search"
/>

<table class="list">
    <thead class="list__header">
        <tr>
            <th class="list__cell list__column-heading row-number" scope="col">#</th>
            <th
                class="list__cell list__column-heading"
                [ngClass]="name"
                (click)="handleSort(name)"
                *ngFor="let name of columnNames"
            >
                <span *ngIf="sortKey === name">
                    {{ sortOrder === 'asc' ? '▲' : sortOrder === 'desc' ? '▼' : '' }}
                </span>
                {{ columnLabels[name] }}
            </th>
        </tr>
    </thead>
    <tbody>
        <tr
            class="list__row"
            *ngFor="let movie of filteredMovies; let index = index"
            (click)="handleRowClick(movie)"
        >
            <td class="list__cell row-number">{{ index + 1 }}</td>
            <td class="list__cell" [ngClass]="column" *ngFor="let column of columnNames">{{ movie[column] }}</td>
        </tr>
        <tr class="list__row" *ngIf="filteredMovies.length === 0">
            <td class="list__cell" [attr.colspan]="(columnNames.length || 1) + 1">No movies found.</td>
        </tr>
    </tbody>
    <tfoot class="list__footer">
        <tr>
            <td class="list__cell" [attr.colspan]="(columnNames.length || 1) + 1">
                Total: {{ filteredMovies.length }} movies.
            </td>
        </tr>
    </tfoot>
</table>
